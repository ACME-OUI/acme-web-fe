{% extends "base.html" %}
{% block title %} ACME Dashboard {% endblock %}
{% block extra_headers %}

{% load staticfiles %}

  <!-- AngularJS -->
  <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.21/angular.min.js"></script>
  <script type="text/javascript" src="{% static "js/controllers/app.js" %}"></script>
  <script type="text/javascript" src="{% static "js/controllers/cdat.js" %}"></script>
  <script type="text/javascript" src="{% static "js/controllers/esgf.js" %}"></script>
  <script type="text/javascript" src="{% static "js/controllers/velo.js" %}"></script>

  <!-- Golden-Layout -->
  <script type="text/javascript" src="{% static "js/resources/goldenlayout.min.js"%}"></script>
  <link type="text/css" rel="stylesheet" href="{% static "css/goldenlayout-base.css"%}"/>
	<link type="text/css" rel="stylesheet" href="{% static "css/goldenlayout-dark-theme.css"%}"/>
  <link type="text/css" rel="stylesheet" href="{% static "css/goldenlayout-light-theme.css"%}"/>

  <!-- Bootstrap -->
  <script type="text/javascript" src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.js"></script>

  <!-- Font Awesome -->
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

  <!-- Slick Carousel -->
  <script type="text/javascript" src="{% static "js/resources/slick.js" %}"></script>
  <link rel="stylesheet" type="text/css" href="{% static "css/slick.css" %}"/>
  <link rel="stylesheet" href="{% static "css/slick-theme.css" %}">

  <!-- Code Mirror -->
  <link rel="stylesheet" href="{% static "css/twilight.css" %}">
  <link rel="stylesheet" href="{% static "css/3024-day.css" %}">
  <link rel="stylesheet" href="{% static "css/codemirror.css" %}">

  <!-- mTree -->
  <link rel="stylesheet" href="{% static "css/mtree.css" %}">
  <script src='http://cdnjs.cloudflare.com/ajax/libs/velocity/0.2.1/jquery.velocity.min.js'></script>

  <!-- Quick tree for cdatweb (change over to m-tree later?)-->
  <script type="text/javascript" src="{% static "js/resources/quicktree.js" %}"></script>
  <!-- CDAT Web css-->
  <link rel="stylesheet" href="{% static "css/cdat.css" %}">

  <!-- vtkweb -->
  <script type="text/javascript" src="{% static "vtkweb/js/autobahn.min.js" %}"></script>
  <script type="text/javascript" src="{% static "vtkweb/js/jquery.hammer.min.js" %}"></script>
  <script type="text/javascript" src="{% static "vtkweb/js/vtkweb-all.js" %}"></script>
  <script type="text/javascript" src="{% static "js/resources/cdat.js" %}"></script>
  <script type="text/javascript">cdat.visualization_launcher = "{{ vis_launcher }}";</script>

  <script type="text/javascript">
    console.log("initializing window system");
    var GoldenLayoutConfig = {
        settings:{
            hasHeaders: true
        },
        content:[{
            type: 'row',
            content: [{
                type: 'component',
                componentName: 'ESGF',
                componentState: { templateId: 'esgf_wrapper' }
            },{
                type: 'component',
                componentName: 'CDAT',
                componentState: { templateId: 'cdat_wrapper' }
            },{
                type: 'component',
                componentName: 'Velo',
                componentState: { templateId: 'velo_wrapper' }
            }]
        }]
    }
    var layout = new GoldenLayout(GoldenLayoutConfig);
    layout.registerComponent( 'ESGF', function( container, state ){
      var templateHtml = $( '#' + state.templateId ).html();
      container.getElement().html( templateHtml );
    });
    layout.registerComponent( 'CDAT', function( container, state ){
      var templateHtml = $( '#' + state.templateId ).html();
      container.getElement().html( templateHtml );
    });
    layout.registerComponent( 'Velo', function( container, state ){
      var templateHtml = $( '#' + state.templateId ).html();
      container.getElement().html( templateHtml );
    });
    layout.on( 'initialised', function(){
      angular.bootstrap( document.body, [ 'dashboard' ]);
    });
    layout.init();
  </script>

  <!--Dashboard main-->
  <!-- <script type="text/javascript" src="{% static "js/dashboard.js" %}"></script> -->
{% endblock %}



{% block dropmenu %}

  <nav class="menu" id="slide-menu-left" style="top: 50px; z-index:22;">
    <ul id="side-menu">
      <div id="velo_window"></div>
      <div id="esgf_window"></div>
      <div id="cdat_window"></div>
      <li><button type="button" class="btn menu-btn" id="new-plot">New Plot</button></li>
    </ul>
    <br>
    <button type="button" class="btn menu-btn" id="dark-mode-toggle">Dark mode is off</button>
    <button type="button" class="btn menu-btn" id="save-layout">Store Current Layout</button>
    <button type="button" class="btn menu-btn" id="load-layout">Load Previous Layout</button>
  </nav>
  <!-- Nav left menu -->

{% endblock %}

{% block content %}
  <div class="wrapper" id="wrapper">
    <div class="tile-board" ng-controller="DashboardControl">
      <div class="">
        <template type="text/html" id="cdat_wrapper">
          <div class="cdat_window" ng-controller="CDATControl">

          </div>
        </template>
      </div>
      <div class="">
        <template type="text/html" id="esgf_wrapper">
          <div class="esgf_window" ng-controller="ESGFControl">

          </div>
        </template>
      </div>
      <div class="">
        <template type="text/html" id="velo_wrapper">
          <div class="velo_window" ng-controller="VeloControl">

          </div>
        </template>
      </div>
      <ul class="tile-holder">
      </ul>
    </div>
  </div>
{% endblock %}
